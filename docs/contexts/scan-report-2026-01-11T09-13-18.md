# Context Scan Report

**Date**: 2026-01-11T09-13-18
**Project**: simulator
**Project ID**: a25313f3-1551-4006-a33e-81dbeb6f0719

## Execution Summary

| Metric | Value |
|--------|-------|
| Total Contexts | 5 |
| New Contexts Created | 4 |
| Existing Contexts Updated | 0 |
| Contexts Deleted | 0 |
| Total Files Covered | 57 |
| Coverage Percentage | 76% |

## Created Contexts

| # | Context Name | Files | Database Status |
|---|--------------|-------|-----------------|
| 1 | Character Studio | 14 | Stored (ID: ctx_1768142540648_xkaah8a) |
| 2 | API Routes | 10 | Stored (ID: ctx_1768142582858_9oi1md9) |
| 3 | Shared Libraries | 6 | Stored (ID: ctx_1768142583945_i70mld7) |
| 4 | UI Components | 2 | Stored (ID: ctx_1768142585006_1qqwvld) |

## Existing Contexts

| # | Context Name | Files | Database Status |
|---|--------------|-------|-----------------|
| 1 | All (Simulator Feature) | 25 | Existing (ID: 5c9313b5-158e-4635-a00c-4f07a9d41249) |

## Detailed Context Information

### 1. All (Simulator Feature) - 25 files
- **ID**: 5c9313b5-158e-4635-a00c-4f07a9d41249
- **Status**: Existing (pre-scan)
- **Description**: Main "What If" image visualization tool with AI-powered prompt generation
- **Files**:
  - app/features/simulator/SimulatorFeature.tsx
  - app/features/simulator/types.ts
  - app/features/simulator/components/BaseImageInput.tsx
  - app/features/simulator/components/DimensionCard.tsx
  - app/features/simulator/components/DimensionGrid.tsx
  - app/features/simulator/components/ElementChip.tsx
  - app/features/simulator/components/ElementToDimensionButton.tsx
  - app/features/simulator/components/FeedbackPanel.tsx
  - app/features/simulator/components/PosterOverlay.tsx
  - app/features/simulator/components/ProjectSelector.tsx
  - app/features/simulator/components/PromptCard.tsx
  - app/features/simulator/components/PromptDetailModal.tsx
  - app/features/simulator/components/PromptOutput.tsx
  - app/features/simulator/components/SavedImageModal.tsx
  - app/features/simulator/components/SidePanel.tsx
  - app/features/simulator/components/SidePanelSlot.tsx
  - app/features/simulator/components/SmartBreakdown.tsx
  - app/features/simulator/components/variants/OnionLayout.tsx
  - app/features/simulator/hooks/useImageGeneration.ts
  - app/features/simulator/hooks/usePoster.ts
  - app/features/simulator/hooks/useProject.ts
  - app/features/simulator/hooks/useSimulator.ts
  - app/features/simulator/lib/defaultDimensions.ts
  - app/features/simulator/lib/promptBuilder.ts
  - app/features/simulator/lib/simulatorAI.ts

### 2. Character Studio - 14 files
- **ID**: ctx_1768142540648_xkaah8a
- **Status**: Created
- **Description**: Character Foundry for AI-generated characters with consistent visual identity
- **Files**:
  - app/features/character-studio/CharacterStudioFeature.tsx
  - app/features/character-studio/types.ts
  - app/features/character-studio/lib/api.ts
  - app/features/character-studio/components/CharacterCard.tsx
  - app/features/character-studio/components/CharacterRoster.tsx
  - app/features/character-studio/components/ConsistencyRadar.tsx
  - app/features/character-studio/components/DNAHelix.tsx
  - app/features/character-studio/components/GeneratorToolbar.tsx
  - app/features/character-studio/components/IdentityInspector.tsx
  - app/features/character-studio/components/index.ts
  - app/features/character-studio/components/JobTestTab.tsx
  - app/features/character-studio/components/MainStage.tsx
  - app/features/character-studio/components/SettingsModal.tsx
  - app/character-studio/page.tsx

### 3. API Routes - 10 files
- **ID**: ctx_1768142582858_9oi1md9
- **Status**: Created
- **Description**: Backend API endpoints for projects, posters, and AI integrations
- **Files**:
  - app/api/ai/simulator/route.ts
  - app/api/ai/image-describe/route.ts
  - app/api/ai/generate-images/route.ts
  - app/api/ai/generate-poster/route.ts
  - app/api/ai/gemini/route.ts
  - app/api/projects/route.ts
  - app/api/projects/[id]/route.ts
  - app/api/projects/[id]/images/route.ts
  - app/api/projects/[id]/poster/route.ts
  - app/api/posters/route.ts

### 4. Shared Libraries - 6 files
- **ID**: ctx_1768142583945_i70mld7
- **Status**: Created
- **Description**: Common utilities, database access, and external service integrations
- **Files**:
  - app/lib/db.ts
  - app/lib/gemini.ts
  - app/lib/utils.ts
  - app/lib/indexedDB.ts
  - app/lib/services/leonardo.ts
  - app/utils/apiErrorHandling.ts

### 5. UI Components - 2 files
- **ID**: ctx_1768142585006_1qqwvld
- **Status**: Created
- **Description**: Shared UI component library
- **Files**:
  - app/components/ui/IconButton.tsx
  - app/components/ui/index.ts

## Files Not Included in Any Context

The following files are not covered by any context (may be root-level or miscellaneous):

- app/layout.tsx (root layout)
- app/page.tsx (root page)
- app/posters/page.tsx (posters page)
- app/globals.css (global styles)
- app/favicon.ico (favicon)
- app/features/simulator/components/interactive/AnimatedTrailer.tsx
- app/features/simulator/components/interactive/ClickablePrototype.tsx
- app/features/simulator/components/interactive/index.ts
- app/features/simulator/components/interactive/InteractivePreview.tsx
- app/features/simulator/components/interactive/WebGLDemo.tsx
- app/features/simulator/components/InteractiveModeToggle.tsx
- app/features/simulator/components/InteractivePreviewModal.tsx
- app/features/simulator/components/PosterGallery.tsx
- app/features/simulator/components/PosterModal.tsx
- app/features/simulator/hooks/useInteractivePrototype.ts
- app/features/simulator/hooks/useLocalPersistedEntity.ts
- app/features/simulator/hooks/usePersistedEntity.ts
- app/features/simulator/lib/concept.ts
- app/features/simulator/lib/gameUIPresets.ts
- app/features/simulator/lib/llmPrompts.ts
- app/features/simulator/lib/motion.ts
- app/features/simulator/lib/semanticColors.ts

**Note**: The Simulator Feature context (All) was created before the interactive components were added. These new files should be added to the context.

## Verification

To verify contexts were saved:
```bash
curl -X GET "http://localhost:3000/api/contexts?projectId=a25313f3-1551-4006-a33e-81dbeb6f0719"
```

## Issues and Warnings

- The existing "All" (Simulator Feature) context is missing 17 newer files (interactive components, additional hooks, lib files)
- All new contexts follow description template
- No duplicate files across contexts

## Context Group

All contexts belong to group: **Simulator** (ID: group_1768122900397_n9vd90l)
- Color: #06B6D4 (Cyan)
- Icon: Code

## Next Steps

- [ ] Update "All" (Simulator Feature) context to include missing 17 files
- [ ] Review generated contexts in the UI
- [ ] Create additional context groups if needed (e.g., "Character Studio" group)
- [ ] Link related goals to contexts

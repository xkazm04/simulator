{
  "version": "1.0.0",
  "generated": "2026-01-11",
  "description": "Business feature map for Simulator - What If image visualization tool. Each context represents a user capability with all implementation layers bundled.",
  "contexts": [
    {
      "id": "image-upload-analysis",
      "title": "Image Upload & AI Analysis",
      "summary": "Upload a reference image and receive AI-powered visual analysis. Gemini Vision extracts the visual format, identifies swappable content, and suggests remix dimensions automatically.",
      "filepaths": {
        "ui": [
          "app/features/simulator/components/BaseImageInput.tsx",
          "app/features/simulator/components/SmartBreakdown.tsx"
        ],
        "logic": [
          "app/features/simulator/lib/simulatorAI.ts",
          "app/lib/gemini.ts"
        ],
        "server": [
          "app/api/ai/image-describe/route.ts",
          "app/api/ai/gemini/route.ts"
        ],
        "data": [
          "app/features/simulator/types.ts"
        ]
      }
    },
    {
      "id": "dimension-remix-input",
      "title": "Dimension & Cultural Reference Input",
      "summary": "Enter cultural references (games, movies, art styles) as remix dimensions. Each dimension card represents a content-swap axis - preserving visual format while transforming the subject matter.",
      "filepaths": {
        "ui": [
          "app/features/simulator/components/DimensionCard.tsx",
          "app/features/simulator/components/DimensionGrid.tsx",
          "app/features/simulator/components/ElementChip.tsx",
          "app/features/simulator/components/ElementToDimensionButton.tsx"
        ],
        "logic": [
          "app/features/simulator/lib/defaultDimensions.ts",
          "app/features/simulator/lib/gameUIPresets.ts",
          "app/features/simulator/lib/semanticColors.ts",
          "app/features/simulator/lib/concept.ts"
        ],
        "server": [],
        "data": [
          "app/features/simulator/types.ts"
        ]
      }
    },
    {
      "id": "prompt-generation",
      "title": "AI Prompt Generation & Feedback",
      "summary": "Generate optimized prompts for AI image generators by combining base image analysis with remix dimensions. Includes feedback panel for iterative refinement and prompt detail editing.",
      "filepaths": {
        "ui": [
          "app/features/simulator/components/PromptCard.tsx",
          "app/features/simulator/components/PromptOutput.tsx",
          "app/features/simulator/components/PromptDetailModal.tsx",
          "app/features/simulator/components/FeedbackPanel.tsx"
        ],
        "logic": [
          "app/features/simulator/lib/promptBuilder.ts",
          "app/features/simulator/lib/llmPrompts.ts"
        ],
        "server": [
          "app/api/ai/simulator/route.ts"
        ],
        "data": [
          "app/features/simulator/types.ts"
        ]
      }
    },
    {
      "id": "image-generation-display",
      "title": "Image Generation & Gallery",
      "summary": "Generate actual images from prompts using Leonardo AI. View results in poster overlay, browse gallery of generated images, and save favorites. Includes poster modal for detailed view.",
      "filepaths": {
        "ui": [
          "app/features/simulator/components/PosterOverlay.tsx",
          "app/features/simulator/components/PosterGallery.tsx",
          "app/features/simulator/components/PosterModal.tsx",
          "app/features/simulator/components/SavedImageModal.tsx",
          "app/features/simulator/components/variants/OnionLayout.tsx"
        ],
        "logic": [
          "app/features/simulator/hooks/useImageGeneration.ts",
          "app/features/simulator/hooks/usePoster.ts",
          "app/lib/services/leonardo.ts"
        ],
        "server": [
          "app/api/ai/generate-images/route.ts",
          "app/api/ai/generate-poster/route.ts",
          "app/api/projects/[id]/images/route.ts",
          "app/api/projects/[id]/poster/route.ts",
          "app/api/posters/route.ts"
        ],
        "data": [
          "app/features/simulator/types.ts"
        ]
      }
    },
    {
      "id": "project-management",
      "title": "Project Save & Load",
      "summary": "Create, save, and load simulator projects. Persists all state including dimensions, base images, generated prompts, and poster images. Projects are stored in SQLite database.",
      "filepaths": {
        "ui": [
          "app/features/simulator/components/ProjectSelector.tsx",
          "app/features/simulator/components/SidePanel.tsx",
          "app/features/simulator/components/SidePanelSlot.tsx",
          "app/posters/page.tsx"
        ],
        "logic": [
          "app/features/simulator/hooks/useProject.ts",
          "app/features/simulator/hooks/usePersistedEntity.ts",
          "app/features/simulator/hooks/useLocalPersistedEntity.ts"
        ],
        "server": [
          "app/api/projects/route.ts",
          "app/api/projects/[id]/route.ts"
        ],
        "data": [
          "app/lib/db.ts",
          "app/lib/indexedDB.ts"
        ]
      }
    },
    {
      "id": "interactive-prototypes",
      "title": "Interactive Prototype Preview",
      "summary": "Preview generated designs as interactive prototypes. Includes WebGL 3D demos, clickable UI mockups, and animated trailers. Toggle between static and interactive preview modes.",
      "filepaths": {
        "ui": [
          "app/features/simulator/components/InteractiveModeToggle.tsx",
          "app/features/simulator/components/InteractivePreviewModal.tsx",
          "app/features/simulator/components/interactive/InteractivePreview.tsx",
          "app/features/simulator/components/interactive/WebGLDemo.tsx",
          "app/features/simulator/components/interactive/ClickablePrototype.tsx",
          "app/features/simulator/components/interactive/AnimatedTrailer.tsx",
          "app/features/simulator/components/interactive/index.ts"
        ],
        "logic": [
          "app/features/simulator/hooks/useInteractivePrototype.ts",
          "app/features/simulator/lib/motion.ts"
        ],
        "server": [],
        "data": []
      }
    },
    {
      "id": "simulator-orchestration",
      "title": "Simulator Main Layout",
      "summary": "Main simulator feature orchestration. Coordinates all sub-features, manages overall state, and provides the primary layout structure with side panels and central preview area.",
      "filepaths": {
        "ui": [
          "app/features/simulator/SimulatorFeature.tsx",
          "app/page.tsx",
          "app/layout.tsx"
        ],
        "logic": [
          "app/features/simulator/hooks/useSimulator.ts"
        ],
        "server": [],
        "data": [
          "app/features/simulator/types.ts"
        ]
      }
    },
    {
      "id": "character-roster-selection",
      "title": "Character Roster & Selection",
      "summary": "Browse and select AI-generated characters from the roster. View character cards with thumbnails and quality scores. Main three-panel layout with collapsible sidebars.",
      "filepaths": {
        "ui": [
          "app/features/character-studio/CharacterStudioFeature.tsx",
          "app/features/character-studio/components/CharacterRoster.tsx",
          "app/features/character-studio/components/CharacterCard.tsx",
          "app/features/character-studio/components/MainStage.tsx",
          "app/features/character-studio/components/index.ts",
          "app/character-studio/page.tsx"
        ],
        "logic": [
          "app/features/character-studio/lib/api.ts",
          "app/features/character-studio/types.ts"
        ],
        "server": [],
        "data": []
      }
    },
    {
      "id": "character-identity-generation",
      "title": "Character Identity & Generation",
      "summary": "Inspect character DNA with visual helix and consistency radar. Generate new character images using distributed GPU workers. Configure presets for portraits, actions, and scenes.",
      "filepaths": {
        "ui": [
          "app/features/character-studio/components/IdentityInspector.tsx",
          "app/features/character-studio/components/DNAHelix.tsx",
          "app/features/character-studio/components/ConsistencyRadar.tsx",
          "app/features/character-studio/components/GeneratorToolbar.tsx",
          "app/features/character-studio/components/JobTestTab.tsx",
          "app/features/character-studio/components/SettingsModal.tsx"
        ],
        "logic": [
          "app/features/character-studio/lib/api.ts",
          "app/features/character-studio/types.ts"
        ],
        "server": [],
        "data": []
      }
    },
    {
      "id": "core-utilities",
      "title": "Core Utilities",
      "summary": "Shared utilities used across multiple features. Includes class name merging (cn), API error handling, and common type definitions. Minimal cross-cutting concerns only.",
      "filepaths": {
        "ui": [
          "app/components/ui/IconButton.tsx",
          "app/components/ui/index.ts"
        ],
        "logic": [
          "app/lib/utils.ts",
          "app/utils/apiErrorHandling.ts"
        ],
        "server": [],
        "data": []
      }
    }
  ]
}
